!function (t) { t.fn.t = function (e, a) { return this.each(function () { var n, r = a, p = e, d = t(this), l = "paused", c = -1, o = !1, b = -1, u = "​", f = "12qwertyuiop[]asdfghjkl;zxcvbnm,./~!@#$%^&*()_+:1234567890-=op".split([]), h = function (e, a) { return t.type(e)[0] == (a || "n") }, m = function () { return g = t.grep(j, function (t) { return "&" == t[0] || !t[1] }).length - 1, g > -1 ? g : 0 }, y = function (t) { b != t && r.blink && (r.blink_perm || $.parent().data("blinking", b = t ? 1 : 0)) }, k = { c: 0, beep: function () { 0 == k.c && (k.c = t("html").data().__TAC), k.o && k.o.stop(), k.o = k.c.createOscillator(), k.o.frequency.setValueAtTime(1, k.c.currentTime), k.g = k.c.createGain(), k.o.connect(k.g), k.g.connect(k.c.destination), k.o.start(), k.o.stop(k.c.currentTime + .03) } }; if ("beep" == p && !d.data().is_typing && t("html").data().__TAC) return k.beep(), this; if ("" === p && (p = "<del>*</del>"), d.data().is_typing) return p == l.slice(0, -1) && (d.data(l, h(r, "b") ? oo_ = r : d.data(l) ? oo_ = !1 : oo_ = !0), d.data().blink && d.data("blinking", oo_)), this; if (p == l.slice(0, -1)) return this; if (d.data("is_typing", 1), h(p, "o") && (r = p), /t\-/.test(d.attr("class"))) return this; if ("add" == p && d.data().t) { var w = r, $ = (r = t.extend({}, d.data()), d = t(":first", d)), A = h(r.typing, "f"); w = "<" + r.tag + ' class="typing-add">' + w + "</" + r.tag + ">" } else { "add" == p && (p = r, r = {}); r = t.extend({ t: !0, delay: !1, speed: 50, speed_vary: !1, caret: "▎", tag: "span", blink: !0, beep: !1, blink_perm: !1, repeat: -3, pause_on_click: !1, wrap: !1, mistype: !1, locale: "en", init: !1, typing: !1, fin: !1 }, r || d.data()); var C, j, x, S, T = !1; w = !1; d.data().t || (d.wrapInner(t("<" + r.tag + "/>", { class: "t-container", style: "top:auto;bottom:auto;" })), /^[ar]/.test(d.css("position")) || d.css({ position: "relative" }), d.css({ overflow: "hidden" })), r.wrap && !d.parent().data().t_wrap && (d.wrap(t("<div/>", /[.#]/.test(r.wrap[0]) ? "#" == r.wrap[0] ? { id: r.wrap.substr(1) } : { class: r.wrap.substr(1) } : { style: r.wrap })), d.parent().data("t_wrap", 1)), h(r.beep, "b") || (r.beep = !1), !0 === r.beep && h(t("html").data().__TAC, "u") && (t("html").data("__TAC", __TAC = !(!window.AudioContext && !window.webkitAudioContext) && new AudioContext), __TAC || (r.beep = !1)), !1 === r.repeat && (r.repeat = -3), !0 === r.caret && (r.caret = "▎"), h(r.caret, "s") && !t(".t-caret", d)[0] && (!0 === r.blink && (r.blink = 3 * r.speed), h(r.blink) && r.blink < 100 && (r.blink = 100), !h(r.blink) && (r.blink = !1), T = t("<" + r.tag + "/>", { class: "t-caret", html: r.caret }).appendTo(d), r.blink && d.append(u) && d.data("bi", setInterval(function () { ($.parent().data().blinking | (v = "h" == T.css("visibility")[0]) || r.blink_perm) && T.css({ visibility: v ? "visible" : "hidden" }) }, r.blink))), r.blink || d.data().bi && clearInterval(d.data().bi) && d.removeData("bi"), !h(r.blink_perm, "b") && (r.blink_perm = !0), r.speed = !h(r.speed) || r.speed < 10 ? 10 : r.speed, r.speed_vary && (r.speed /= 2.5), r.mistype > 1 || (r.mistype = !1), d.data(r), t(".typing-0", d).replaceWith(function () { return this.childNodes }), t(".typing-add", d).remove(), $ = d = t(":first", d), "" == (j = h(p, "s") ? p : d.html()) && (j = u), d.empty(), $.parent().show().css({ visibility: "visible" }), h(r.delay) && r.delay > 0 && (C = ~~(1e3 * r.delay / r.speed)) && r.blink_perm || y(1), A = h(r.typing, "f"), !0 === r.pause_on_click && d.parent().off("click").click(function (e) { "1" != t(e.target).data().click && t(this).t("pause") }) } /<kbd.*?>/i.test(j = String(w || j)) && d.parent().data("kbd", j_ = 1) && d.parent().data("mistype", d.parent().data("mistype") ? _j = d.parent().data().mistype : _j = 10) && (r.mistype = _j) && (r.kbd = j_ || !1), j = j.replace(/(.*?)[\u200b]+$/, "$1").replace(/<\!\-\-([\s\S]+?)\-\->/g, "$1").replace(/<ins>([^0-9])<\/ins>/g, "$1").replace(/<(embed|command|col|wbr|img|br|input|hr|area|source|track|keygen|param)(.*?)[\/]?>/g, "<#$1$2/>").replace(/<ins>\s*(\d*[.]?\d*)\s*(<\/ins>)/g, '<ins data-ins="$1"></ins>').replace(/<ins(.*?)>([\s\S]*?)(<\/ins>)/g, function (t, e, a) { return "<#ins" + e + ">" + a.replace(/<(?!#)/g, "<#") + "<#/ins>" + (a ? "" : "</ins>") }).replace(/<(del.*?data-del=")(.*?)(".*?)><\/(del>)/g, "<#$1$2$3><#/$4$2</$4").replace(/<del(.*?)>([\s\S]*?)<\/del>/g, function (t, e, a, n) { return s = a.match(/<s>\s*(.*?)\s*<\/s>/i), s = s && s[0] ? ' data-s="' + (s[1] || "1") + '"' : "", i = a.match(/data-ins=\"(.*?)\"/), i = i && i[1] ? i[1] : "" == s ? .25 : .75, a = a.replace(/(<s>.*?<\/s>|<[\/]?.*?>)/g, ""), "<del" + e + s + ' data-del="' + a.replace(/\n/, "\\n") + '" data-ins="' + i + '">' + ("*" != a ? a : "") + "</del>" }).replace(/<(\w+)(.*?)>/g, "<$1$2><#/$1>").replace(/<\/(\w+)>/g, "</> ($1)").replace(/<[#]+/g, "<").replace(/(\/del>)\*</g, "$1<").match(/<ins.*?>[\s\S]*?<\/ins>|<[^<]+\/>|<\/> \(\w+\)|<[\s\S]+?><\/\w+>|&[#x]?[a-z0-9]+;|\r|\n|\t|\S|\s/gi), !h(C) && (C = j.shift()), j.push(u), "de" == r.locale && (f = '12qwertzuiopü+asdfghjklöä#<yxcvbnm,.-!"§$%&/(()=?1234567890ß*p+'), x = m() + 1, !w && h(r.init, "f") && r.init($.parent()), S = setInterval(function () { if ($.parent().data(l)) c = 1; else if (!o) { if (o = !o, h(C)) { if (--C > 0) return o = !o, void y(d.data().ins <= .25 ? 0 : 1 == c ? c = -1 : 1); C = d.data().ins ? "</>" : j.shift() } else if (r.speed_vary && ~~(4 * Math.random())) return void (o = !o); if (y(0), d.data().del && (!0 === $.parent().data().beep && k.beep(), d.data().s && !C[0] && d.text(""), n = String(d.data().del), !h(C, "a") && "/" == C[1] && (C = n.replace(/\\n/g, "\n").split([])), h(C, "a"))) { if (c = C.pop()) return d.data().s ? d.html(C.join([]) + "<mark " + ("." == (_ = String(d.data().s))[0] ? 'class="' + _.substr(1) + '"' : 'style="background:' + ("1" == _ ? "yellow" : _.split(",")[0]) + ((_ = _.split(",")[1]) ? ";color:" + _ : "") + ';"') + ">" + d.data().del.substr(C.length) + "</mark>") : d.text(C.join([])), void (o = !o); "*" == n && ($.wrapInner(t("<" + r.tag + "/>", { class: "typing-0", style: "display:none;" })), d = d.parent(), w && (j = t.merge(["<" + r.tag + ' class="typing-add"></' + r.tag + ">"], j, ["</" + r.tag + ">"]), d = d.parent())), d = d.parent(), n == u && d.find(":last").remove(), C = "" } for (; "/" == C[1];)d = d.parent(), C = j.shift() || ""; for (; !0 === $.parent().data().beep && k.beep(), d.append(C), A && r.typing($.parent(), C, m(), x), !/<ins.*?>[\s\S]+</.test(C) && /></.test(C) && (d = d.find(":last")), j[0] && /<\w+/.test(j[0]);)C = j.shift(); if (!(C = j.shift())) return clearInterval(S), $.parent().removeData(["is_typing", l]), h(r.repeat) && --r.repeat, r.repeat > -1 ? (r.init = !1, void $.parent().t(h(p, "o") ? r : p, r)) : (y(1), void (h(r.fin, "f") && r.fin($.parent()))); (r.mistype && !r.kbd || r.kbd && /kbd/i.test(d.prop("tagName"))) && C && !C[1] && d.data().del != u && " " != C && !~~(Math.random() * r.mistype) && (__ = t.inArray(C.toLowerCase(), f, 2)) > -1 && (__ += 1 + ~~(2 * Math.random()), ~~(2 * Math.random()) && (__ -= 3), j = t.merge([C.charCodeAt(0) < 90 ? f[__].toUpperCase() : f[__], "</del>", C], j), C = '<del data-ins=".25" data-del="​"></del>'), C && "/" == C[1] && d.data().ins && (C = ~~(1e3 * Number(d.data().ins) / r.speed)), o = !o } }, r.speed) }) }, t.fn.a = function (e) { return this.each(function () { t(this).data().t && t(this).t("add", e) }) }, t.fn.p = function (e) { return this.each(function () { t(this).data().is_typing && t(this).t("pause", e && (!1 === e || !0 === e) ? e : void 0) }) }, t.fn.b = function (e) { return this.each(function () { t(this).t("beep") }) } }(jQuery);